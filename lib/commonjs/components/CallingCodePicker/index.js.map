{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","RNLocalize","_countries","_interopRequireDefault","_utility","_theme","_ItemSeparator","_PickerItem","_PickerToggler","_Search","_styles","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","CallingCodePicker","_ref","initialCountryCode","onValueChange","togglerContainerStyle","togglerLabelStyle","listContainerStyle","listStyle","pickerItemLabelStyle","searchInputStyle","pickerItemContainerStyle","style","isFlagVisible","searchValue","setSearchValue","useState","isPickerOpen","setIsPickerOpen","countriesData","setCountriesData","sortData","countries","localCountryCode","find","f","alpha2Code","getCountry","selectedCountry","setSelectedCountry","containerRef","createRef","toggleMeasure","setToggleMeasure","containerMeasure","setContainerMeasure","styles","useStyles","calculateModalVerticalPosition","handleCountrySelect","country","useEffect","newCountries","filter","s","callingCode","trim","toLowerCase","includes","name","renderPickerItem","renderItem","item","createElement","onCountrySelect","textStyle","containerStyle","screenHeight","Dimensions","height","y","MODAL_SIZE","spacing","dismissPicker","View","ref","onLayout","onLayoutToggle","measure","flag","selectedCode","onPickerToggle","Modal","visible","transparent","animationType","modalChild","TouchableOpacity","dismissButton","onPress","KeyboardAvoidingView","behavior","keyboardAvoidingView","keyboardVerticalOffset","Platform","OS","listContainer","value","onChangeText","onClearInput","inputStyle","FlatList","data","keyExtractor","_","index","toString","showsVerticalScrollIndicator","ItemSeparatorComponent","ItemSeparator","keyboardShouldPersistTaps","_default","exports"],"sources":["index.tsx"],"sourcesContent":["import React, { createRef, useEffect, useState } from 'react';\nimport {\n  Dimensions,\n  FlatList,\n  KeyboardAvoidingView,\n  ListRenderItemInfo,\n  Modal,\n  Platform,\n  TouchableOpacity,\n  View,\n} from 'react-native';\nimport * as RNLocalize from 'react-native-localize';\nimport countries from '../../data/countries';\nimport { onLayoutToggle, sortData } from '../../functions/utility';\nimport { MODAL_SIZE, spacing } from '../../theme';\nimport { ICallingCodePickerProps, ICountry, IItemMeasure } from '../../types';\nimport ItemSeparator from '../ItemSeparator';\nimport PickerItem from '../PickerItem';\nimport PickerToggler from '../PickerToggler';\nimport Search from '../Search';\nimport useStyles from './styles';\n\nconst CallingCodePicker: React.FC<ICallingCodePickerProps> = ({\n  initialCountryCode,\n  onValueChange,\n  togglerContainerStyle,\n  togglerLabelStyle,\n  listContainerStyle,\n  listStyle,\n  pickerItemLabelStyle,\n  searchInputStyle,\n  pickerItemContainerStyle,\n  style,\n  isFlagVisible = true,\n}) => {\n  const [searchValue, setSearchValue] = useState<string>('');\n  const [isPickerOpen, setIsPickerOpen] = useState<boolean>(false);\n  const [countriesData, setCountriesData] = useState<ICountry[]>(sortData(countries, ''));\n  const localCountryCode = countries.find(f => f.alpha2Code === RNLocalize.getCountry());\n  const [selectedCountry, setSelectedCountry] = useState<ICountry | undefined>(\n    initialCountryCode\n      ? countries.find(f => f.alpha2Code === initialCountryCode) ?? localCountryCode\n      : localCountryCode,\n  );\n  const containerRef = createRef<View>();\n  const [toggleMeasure, setToggleMeasure] = useState<IItemMeasure>();\n  const [containerMeasure, setContainerMeasure] = useState<IItemMeasure>();\n  const styles = useStyles(calculateModalVerticalPosition());\n\n  const handleCountrySelect = (country: ICountry) => {\n    setSelectedCountry(country);\n    setIsPickerOpen(false);\n    setSearchValue('');\n  };\n\n  useEffect(() => {\n    let newCountries = countries.filter(\n      s =>\n        s.callingCode === searchValue.trim() ||\n        s.alpha2Code.trim().toLowerCase().includes(searchValue.trim().toLowerCase()) ||\n        s.name.trim().toLowerCase().includes(searchValue.trim().toLowerCase()),\n    );\n\n    newCountries = sortData(newCountries, searchValue);\n\n    setCountriesData(newCountries);\n  }, [searchValue]);\n\n  const renderPickerItem = (renderItem: ListRenderItemInfo<ICountry>) => {\n    const { item: country } = renderItem;\n    return (\n      <PickerItem\n        country={country}\n        onCountrySelect={handleCountrySelect}\n        textStyle={pickerItemLabelStyle}\n        containerStyle={pickerItemContainerStyle}\n      />\n    );\n  };\n\n  function calculateModalVerticalPosition() {\n    const screenHeight = Dimensions.get('window').height;\n    const y = (containerMeasure?.y ?? 0) + (toggleMeasure?.height ?? 0);\n\n    return y + MODAL_SIZE > screenHeight ? screenHeight - MODAL_SIZE - 2 * spacing.s : y;\n  }\n\n  useEffect(() => {\n    onValueChange(selectedCountry?.callingCode);\n  }, [selectedCountry, onValueChange]);\n\n  function dismissPicker() {\n    setIsPickerOpen(false);\n    setSearchValue('');\n  }\n\n  return (\n    <View\n      style={style}\n      ref={containerRef}\n      onLayout={() => onLayoutToggle(containerRef, measure => setContainerMeasure(measure))}\n    >\n      <PickerToggler\n        flag={selectedCountry?.flag}\n        selectedCode={selectedCountry?.callingCode}\n        isPickerOpen={isPickerOpen}\n        onPickerToggle={setIsPickerOpen}\n        containerStyle={togglerContainerStyle}\n        textStyle={togglerLabelStyle}\n        onLayout={measure => setToggleMeasure(measure)}\n        isFlagVisible={isFlagVisible}\n      />\n      <Modal visible={isPickerOpen} transparent animationType=\"fade\">\n        <View style={styles.modalChild}>\n          <TouchableOpacity style={styles.dismissButton} onPress={dismissPicker} />\n          <KeyboardAvoidingView\n            behavior=\"position\"\n            style={styles.keyboardAvoidingView}\n            keyboardVerticalOffset={Platform.OS === 'ios' ? 10 : -60}\n          >\n            <View style={listContainerStyle ?? styles.listContainer}>\n              <Search\n                value={searchValue}\n                onChangeText={setSearchValue}\n                onClearInput={() => setSearchValue('')}\n                inputStyle={searchInputStyle}\n              />\n              <FlatList\n                data={countriesData}\n                renderItem={renderPickerItem}\n                keyExtractor={(_, index) => index.toString()}\n                showsVerticalScrollIndicator={false}\n                style={listStyle}\n                ItemSeparatorComponent={ItemSeparator}\n                keyboardShouldPersistTaps=\"always\"\n              />\n            </View>\n          </KeyboardAvoidingView>\n        </View>\n      </Modal>\n    </View>\n  );\n};\n\nexport default CallingCodePicker;\n"],"mappings":"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"}